/**
 * @license Mojiito v2.0.0-alpha.3-e516559
 * (c) 2010-2017 Thomas Pink
 * License: MIT
 */
!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory((global.mj=global.mj||{},global.mj.core=global.mj.core||{}))}(this,function(exports){"use strict";function getClassName(klass){return klass.name?klass.name:/^function\s+([\w\$]+)\s*\(/.exec(this.toString())[1]}function stringify(token){if("string"==typeof token)return token;if(void 0===token||null===token)return""+token;if(token.name)return token.name;if(token.overriddenName)return token.overriddenName;if("function"==typeof token)return getClassName(token);if(token instanceof HTMLElement){var parts=token.toString().match(/\w+/g);if(parts&&parts.length)return parts[parts.length-1]}var res=token.toString(),newLineIndex=res.indexOf("\n");return-1===newLineIndex?res:res.substring(0,newLineIndex)}function makeDecorator(name,props,parentClass,chainFn){function DecoratorFactory(objOrType){if(!Reflect||!Reflect.getOwnMetadata)throw"reflect-metadata shim is required when using class decorators";if(this instanceof DecoratorFactory)return metaCtor.call(this,objOrType),this;var annotationInstance=new DecoratorFactory(objOrType),chainAnnotation="function"==typeof this&&Array.isArray(this.annotations)?this.annotations:[];chainAnnotation.push(annotationInstance);var TypeDecorator=function(cls){var annotations=Reflect.getOwnMetadata("annotations",cls)||[];return annotations.push(annotationInstance),Reflect.defineMetadata("annotations",annotations,cls),cls};return TypeDecorator.annotations=chainAnnotation,chainFn&&chainFn(TypeDecorator),TypeDecorator}void 0===chainFn&&(chainFn=null);var metaCtor=makeMetadataCtor([props]);return parentClass&&(DecoratorFactory.prototype=Object.create(parentClass.prototype)),DecoratorFactory.prototype.toString=function(){return"@"+name},DecoratorFactory.annotationCls=DecoratorFactory,DecoratorFactory}function makeMetadataCtor(props){return function(){for(var _this=this,args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];props.forEach(function(prop,i){var argVal=args[i];if(Array.isArray(prop))_this[prop[0]]=void 0===argVal?prop[1]:argVal;else for(var propName in prop)_this[propName]=argVal&&argVal.hasOwnProperty(propName)?argVal[propName]:prop[propName]})}}function makeParamDecorator(name,props,parentClass){function ParamDecoratorFactory(){function ParamDecorator(cls,unusedKey,index){for(var parameters=Reflect.getOwnMetadata("parameters",cls)||[];parameters.length<=index;)parameters.push(null);return parameters[index]=parameters[index]||[],parameters[index].push(annotationInstance),Reflect.defineMetadata("parameters",parameters,cls),cls}for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(this instanceof ParamDecoratorFactory)return metaCtor.apply(this,args),this;var annotationInstance=new(ParamDecoratorFactory.bind.apply(ParamDecoratorFactory,[void 0].concat(args)));return ParamDecorator.annotation=annotationInstance,ParamDecorator}var metaCtor=makeMetadataCtor(props);return parentClass&&(ParamDecoratorFactory.prototype=Object.create(parentClass.prototype)),ParamDecoratorFactory.prototype.toString=function(){return"@"+name},ParamDecoratorFactory.annotationCls=ParamDecoratorFactory,ParamDecoratorFactory}function makePropDecorator(name,props,parentClass){function PropDecoratorFactory(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(this instanceof PropDecoratorFactory)return metaCtor.apply(this,args),this;var decoratorInstance=new(PropDecoratorFactory.bind.apply(PropDecoratorFactory,[void 0].concat(args)));return function(target,name){var meta=Reflect.getOwnMetadata("propMetadata",target.constructor)||{};meta[name]=meta.hasOwnProperty(name)&&meta[name]||[],meta[name].unshift(decoratorInstance),Reflect.defineMetadata("propMetadata",meta,target.constructor)}}var metaCtor=makeMetadataCtor(props);return parentClass&&(PropDecoratorFactory.prototype=Object.create(parentClass.prototype)),PropDecoratorFactory.prototype.toString=function(){return"@"+name},PropDecoratorFactory.annotationCls=PropDecoratorFactory,PropDecoratorFactory}function isType(v){return"function"==typeof v}function convertTsickleDecoratorIntoMetadata(decoratorInvocations){return decoratorInvocations?decoratorInvocations.map(function(decoratorInvocation){var decoratorType=decoratorInvocation.type,annotationCls=decoratorType.annotationCls,annotationArgs=decoratorInvocation.args?decoratorInvocation.args:[];return new(annotationCls.bind.apply(annotationCls,[void 0].concat(annotationArgs)))}):[]}function getParentCtor(ctor){var parentProto=Object.getPrototypeOf(ctor.prototype),parentCtor=parentProto?parentProto.constructor:null;return parentCtor||Object}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function findFirstClosedCycle(keys){for(var res=[],i=0;i<keys.length;++i){if(res.indexOf(keys[i])>-1)return res.push(keys[i]),res;res.push(keys[i])}return res}function constructResolvingPath(keys){if(keys.length>1){var reversed=findFirstClosedCycle(keys.slice().reverse()),tokenStrs=reversed.map(function(k){return stringify(k.token)});return" ("+tokenStrs.join(" -> ")+")"}return""}/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function forwardRef(forwardRefFn){return forwardRefFn.__forward_ref__=forwardRef,forwardRefFn.toString=function(){return stringify(this())},forwardRefFn}function resolveForwardRef(type){return"function"==typeof type&&type.hasOwnProperty("__forward_ref__")&&type.__forward_ref__===forwardRef?type():type}function resolveReflectiveFactory(provider){var factoryFn,resolvedDeps;if(provider.useClass){var useClass=resolveForwardRef(provider.useClass);factoryFn=reflector.factory(useClass),resolvedDeps=_dependenciesFor(useClass)}else provider.useExisting?(factoryFn=function(aliasInstance){return aliasInstance},resolvedDeps=[ReflectiveDependency.fromKey(ReflectiveKey.get(provider.useExisting))]):provider.useFactory?(factoryFn=provider.useFactory,resolvedDeps=constructDependencies(provider.useFactory,provider.deps)):(factoryFn=function(){return provider.useValue},resolvedDeps=_EMPTY_LIST);return new ResolvedReflectiveFactory(factoryFn,resolvedDeps)}function resolveReflectiveProvider(provider){return new ResolvedReflectiveProvider_(ReflectiveKey.get(provider.provide),[resolveReflectiveFactory(provider)],provider.multi)}function resolveReflectiveProviders(providers){var normalized=_normalizeProviders(providers,[]),resolved=normalized.map(resolveReflectiveProvider),resolvedProviderMap=mergeResolvedReflectiveProviders(resolved,new Map);return Array.from(resolvedProviderMap.values())}function mergeResolvedReflectiveProviders(providers,normalizedProvidersMap){for(var i=0;i<providers.length;i++){var provider=providers[i],existing=normalizedProvidersMap.get(provider.key.id);if(existing){if(provider.multiProvider!==existing.multiProvider)throw new MixingMultiProvidersWithRegularProvidersError(existing,provider);if(provider.multiProvider)for(var j=0;j<provider.resolvedFactories.length;j++)existing.resolvedFactories.push(provider.resolvedFactories[j]);else normalizedProvidersMap.set(provider.key.id,provider)}else{var resolvedProvider=void 0;resolvedProvider=provider.multiProvider?new ResolvedReflectiveProvider_(provider.key,provider.resolvedFactories.slice(),provider.multiProvider):provider,normalizedProvidersMap.set(provider.key.id,resolvedProvider)}}return normalizedProvidersMap}function _normalizeProviders(providers,res){return providers.forEach(function(b){if(b instanceof Function)res.push({provide:b,useClass:b});else if(b&&"object"==typeof b&&void 0!==b.provide)res.push(b);else{if(!(b instanceof Array))throw new InvalidProviderError(b);_normalizeProviders(b,res)}}),res}function constructDependencies(typeOrFunc,dependencies){if(dependencies){var params_1=dependencies.map(function(t){return[t]});return dependencies.map(function(t){return _extractToken(typeOrFunc,t,params_1)})}return _dependenciesFor(typeOrFunc)}function _dependenciesFor(typeOrFunc){var params=reflector.parameters(typeOrFunc);if(!params)return[];if(params.some(function(p){return null==p}))throw new NoAnnotationError(typeOrFunc,params);return params.map(function(p){return _extractToken(typeOrFunc,p,params)})}function _extractToken(typeOrFunc,metadata,params){var token=null,optional=!1;if(!Array.isArray(metadata))return metadata instanceof Inject?_createDependency(metadata.token,optional,null):_createDependency(metadata,optional,null);for(var visibility=null,i=0;i<metadata.length;++i){var paramMetadata=metadata[i];paramMetadata instanceof Function?token=paramMetadata:paramMetadata instanceof Inject?token=paramMetadata.token:paramMetadata instanceof Optional?optional=!0:(paramMetadata instanceof Self||paramMetadata instanceof SkipSelf)&&(visibility=paramMetadata)}if(token=resolveForwardRef(token),null!=token)return _createDependency(token,optional,visibility);throw new NoAnnotationError(typeOrFunc,params)}function _createDependency(token,optional,visibility){return new ReflectiveDependency(ReflectiveKey.get(token),optional,visibility)}function _mapProviders(injector,fn){for(var res=new Array(injector._providers.length),i=0;i<injector._providers.length;++i)res[i]=fn(injector.getProviderAtIndex(i));return res}function getPlatform(){return _platform&&!_platform.destroyed?_platform:null}function createPlatformFactory(providers){return void 0===providers&&(providers=[]),function(extraProviders){if(void 0===extraProviders&&(extraProviders=[]),getPlatform())throw new PlatformAlreadyExistsError;var injector=ReflectiveInjector.resolveAndCreate(providers.concat(extraProviders));return _platform=injector.get(PlatformRef)}}function asProviderData(view,index){return view.nodes[index]}function tokenKey(token){var key=_tokenKeyCache.get(token);return key||(key=stringifyToken(token),_tokenKeyCache.set(token,key)),key}function stringifyToken(token){return token instanceof ReflectiveDependency?token.key.displayName:token instanceof ReflectiveKey?token.displayName:stringify(token)}function resolveDep(view,depDef,allowPrivateServices,notFoundValue){if(void 0===notFoundValue&&(notFoundValue=Injector.THROW_IF_NOT_FOUND),8&depDef.flags)return depDef.token;var startView=view;2&depDef.flags&&(notFoundValue=null);var tokenKey=depDef.tokenKey;for(1&depDef.flags&&(allowPrivateServices=!1,view=view.parent);view;){var def=view.def;if(def)switch(tokenKey){case RendererTokenKey:return view.renderer;case ElementRefTokenKey:return new ElementRef(view.renderElement);case ViewContainerRefTokenKey:return view.viewContainer||view.viewContainerParent;case InjectorRefTokenKey:return createInjector(view);default:var providerDef=(allowPrivateServices?def.allProviders:def.publicProviders)[tokenKey];if(providerDef){var providerData=asProviderData(view,providerDef.index);return providerData.instance===NOT_CREATED&&(providerData.instance=_createProviderInstance(view,providerDef)),providerData.instance}}view=view.parent}return startView.root.injector.get(depDef.token,notFoundValue)}function _createProviderInstance(view,def){var allowPrivateServices=(4096&def.flags)>0,providerDef=def.provider,deps=[];return providerDef.deps&&(deps=providerDef.deps.map(function(d){return resolveDep(view,d,allowPrivateServices)})),providerDef.factory.apply(providerDef,deps)}function createProviderInstance(view,def){return 2048&def.flags?NOT_CREATED:_createProviderInstance(view,def)}function createRootView(def,injector,rootSelectorOrNode){var rendererFactory=injector.get(RendererFactory),root=createRootData(injector,rendererFactory,rootSelectorOrNode),view=createView(root,null,root.element,def);return view.renderer.parse(view),view}function createView(root,parent,renderElement,def){var nodes=new Array(def.nodes.length),view={def:def,renderElement:renderElement,root:root,renderer:createRenderer(renderElement,def,parent,root),nodes:nodes,parent:parent,viewContainerParent:void 0,viewContainer:void 0,context:void 0,component:void 0,state:3,disposables:void 0};return 16384&def.nodeFlags&&(view.viewContainer=createViewContainerData(view)),createViewNodes(view),view}function initView(view,component,context){view.component=component,view.context=context}function destroyView(view){if(!(8&view.state)){if(view.disposables)for(var i=0;i<view.disposables.length;i++)view.disposables[i]();destroyViewNodes(view),view.renderer.destroy(),view.state|=8}}function createViewNodes(view){for(var nodeData,def=view.def,nodes=view.nodes,i=0;i<def.nodes.length;i++){var nodeDef=def.nodes[i];switch(16512&nodeDef.flags){case 128:var instance=createProviderInstance(view,nodeDef);nodeData={instance:instance};break;case 16384:var instance=createProviderInstance(view,nodeDef);nodeData={instance:instance},initView(view,instance,instance)}nodes[i]=nodeData}}function destroyViewNodes(view){view.renderer.destroyNode(view.renderElement)}function createRootData(injector,rendererFactory,rootSelectorOrNode){var renderer=rendererFactory.createRenderer(null,null),element=rootSelectorOrNode;return"string"==typeof rootSelectorOrNode&&(element=renderer.selectRootElement(rootSelectorOrNode)),{injector:injector,selectorOrNode:rootSelectorOrNode,element:element,rendererFactory:rendererFactory,renderer:renderer}}function viewDef(publicProviders,componentProvider){var viewDef={},publicProv=Object.create(null);publicProviders&&resolveReflectiveProviders(publicProviders).forEach(function(p){var resolvedFactory=p.resolvedFactories[0];publicProv[tokenKey(p.key)]={factory:resolvedFactory.factory,dependencies:resolvedFactory.dependencies,multi:p.multiProvider}}),viewDef.publicProviders=publicProv;var allProviders=Object.create(publicProv);if(viewDef.allProviders=allProviders,componentProvider){var resolvedComp=resolveReflectiveProviders([componentProvider])[0],resolvedCompFactory=resolvedComp.resolvedFactories[0];viewDef.componentProvider={factory:resolvedCompFactory.factory,dependencies:resolvedCompFactory.dependencies,multi:!1},allProviders[tokenKey(resolvedComp.key)]=viewDef.componentProvider}return viewDef}function createViewDefinitionFactory(publicProviders,componentProvider){return function(){return viewDef(publicProviders,componentProvider)}}function createRenderer(hostElement,viewDef,parentView,root){for(var rendererType=viewDef.componentRendererType,view=parentView;view&&!rendererType;)rendererType=view.def.componentRendererType,view=view.parent;return rendererType?root.rendererFactory.createRenderer(hostElement,rendererType):root.renderer}function attachEmbeddedView(parentView,viewIndex,view){var embeddedViews=parentView.viewContainer._embeddedViews;null==viewIndex&&(viewIndex=embeddedViews.length),view.viewContainerParent=parentView,addToArray(embeddedViews,viewIndex,view)}function detachEmbeddedView(parent,viewIndex){var embeddedViews=parent.viewContainer._embeddedViews;if((null==viewIndex||viewIndex>=embeddedViews.length)&&(viewIndex=embeddedViews.length-1),0>viewIndex)return null;var view=embeddedViews[viewIndex];return view.viewContainerParent=void 0,removeFromArray(embeddedViews,viewIndex),view}function addToArray(arr,index,value){index>=arr.length?arr.push(value):arr.splice(index,0,value)}function removeFromArray(arr,index){index>=arr.length-1?arr.pop():arr.splice(index,1)}function resolveViewDefinition(factory){var value=VIEW_DEFINITION_CACHE.get(factory);return value||(value=factory(),VIEW_DEFINITION_CACHE.set(factory,value)),value}function createInjector(view){return new Injector_(view)}function createComponentFactory(selector,componentType,viewDefFactory){return new ComponentFactory_(selector,componentType,viewDefFactory)}function createViewContainerData(view){return new ViewContainerRef_(view)}var globalScope,__extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),StringMapWrapper=function(){function StringMapWrapper(){}return StringMapWrapper.merge=function(m1,m2){for(var m={},_i=0,_a=Object.keys(m1);_i<_a.length;_i++){var k=_a[_i];m[k]=m1[k]}for(var _b=0,_c=Object.keys(m2);_b<_c.length;_b++){var k=_c[_b];m[k]=m2[k]}return m},StringMapWrapper.equals=function(m1,m2){var k1=Object.keys(m1),k2=Object.keys(m2);if(k1.length!=k2.length)return!1;for(var i=0;i<k1.length;i++){var key=k1[i];if(m1[key]!==m2[key])return!1}return!0},StringMapWrapper}(),ListWrapper=function(){function ListWrapper(){}return ListWrapper.findLast=function(arr,condition){for(var i=arr.length-1;i>=0;i--)if(condition(arr[i]))return arr[i];return null},ListWrapper.removeAll=function(list,items){for(var i=0;i<items.length;++i){var index=list.indexOf(items[i]);index>-1&&list.splice(index,1)}},ListWrapper.remove=function(list,el){var index=list.indexOf(el);return index>-1?(list.splice(index,1),!0):!1},ListWrapper.equals=function(a,b){if(a.length!=b.length)return!1;for(var i=0;i<a.length;++i)if(a[i]!==b[i])return!1;return!0},ListWrapper.flatten=function(list){return list.reduce(function(flat,item){var flatItem=Array.isArray(item)?ListWrapper.flatten(item):item;return flat.concat(flatItem)},[])},ListWrapper.forEach=function(list,callback){for(var i=0,max=list.length;max>i;i++)callback.call(callback,list[i],i)},ListWrapper}();globalScope="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window;/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Reflect=globalScope.Reflect,Component=makeDecorator("Component",{selector:void 0,providers:void 0,components:void 0,host:void 0,childs:void 0}),HostListener=makePropDecorator("HostListener",[["eventName",void 0],["args",[]]]),ChildListener=makePropDecorator("ChildListener",[["selector",void 0],["eventName",void 0],["args",[]]]),Type=Function,DELEGATE_CTOR=/^function\s+\S+\(\)\s*{\s*("use strict";)?\s*(return\s+)?(\S+\s+!==\s+null\s+&&\s+)?\S+\.apply\(this,\s*arguments\)/,ReflectionCapabilities=function(){function ReflectionCapabilities(reflect){this._reflect=reflect||globalScope.Reflect}return ReflectionCapabilities.prototype.isReflectionEnabled=function(){return!0},ReflectionCapabilities.prototype.factory=function(t){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return new(t.bind.apply(t,[void 0].concat(args)))}},ReflectionCapabilities.prototype._zipTypesAndAnnotations=function(paramTypes,paramAnnotations){var result;result=new Array("undefined"==typeof paramTypes?paramAnnotations.length:paramTypes.length);for(var i=0;i<result.length;i++)result[i]="undefined"==typeof paramTypes?[]:paramTypes[i]!=Object?[paramTypes[i]]:[],paramAnnotations&&null!=paramAnnotations[i]&&(result[i]=result[i].concat(paramAnnotations[i]));return result},ReflectionCapabilities.prototype._ownParameters=function(type,parentCtor){if(DELEGATE_CTOR.exec(type.toString()))return null;if(type.parameters&&type.parameters!==parentCtor.parameters)return type.parameters;var tsickleCtorParams=type.ctorParameters;if(tsickleCtorParams&&tsickleCtorParams!==parentCtor.ctorParameters){var ctorParameters="function"==typeof tsickleCtorParams?tsickleCtorParams():tsickleCtorParams,paramTypes=ctorParameters.map(function(ctorParam){return ctorParam&&ctorParam.type}),paramAnnotations=ctorParameters.map(function(ctorParam){return ctorParam&&convertTsickleDecoratorIntoMetadata(ctorParam.decorators)});return this._zipTypesAndAnnotations(paramTypes,paramAnnotations)}if(null!=this._reflect&&null!=this._reflect.getOwnMetadata){var paramAnnotations=this._reflect.getOwnMetadata("parameters",type),paramTypes=this._reflect.getOwnMetadata("design:paramtypes",type);if(paramTypes||paramAnnotations)return this._zipTypesAndAnnotations(paramTypes,paramAnnotations)}return new Array(type.length).fill(void 0)},ReflectionCapabilities.prototype.parameters=function(type){if(!isType(type))return[];var parentCtor=getParentCtor(type),parameters=this._ownParameters(type,parentCtor);return parameters||parentCtor===Object||(parameters=this.parameters(parentCtor)),parameters||[]},ReflectionCapabilities.prototype._ownAnnotations=function(typeOrFunc,parentCtor){if(typeOrFunc.annotations&&typeOrFunc.annotations!==parentCtor.annotations){var annotations=typeOrFunc.annotations;return"function"==typeof annotations&&annotations.annotations&&(annotations=annotations.annotations),annotations}return typeOrFunc.decorators&&typeOrFunc.decorators!==parentCtor.decorators?convertTsickleDecoratorIntoMetadata(typeOrFunc.decorators):this._reflect&&this._reflect.getOwnMetadata?this._reflect.getOwnMetadata("annotations",typeOrFunc):void 0},ReflectionCapabilities.prototype.annotations=function(typeOrFunc){if(!isType(typeOrFunc))return[];var parentCtor=getParentCtor(typeOrFunc),ownAnnotations=this._ownAnnotations(typeOrFunc,parentCtor)||[],parentAnnotations=parentCtor!==Object?this.annotations(parentCtor):[];return parentAnnotations.concat(ownAnnotations)},ReflectionCapabilities.prototype._ownPropMetadata=function(typeOrFunc,parentCtor){if(typeOrFunc.propMetadata&&typeOrFunc.propMetadata!==parentCtor.propMetadata){var propMetadata=typeOrFunc.propMetadata;return"function"==typeof propMetadata&&propMetadata.propMetadata&&(propMetadata=propMetadata.propMetadata),propMetadata}if(typeOrFunc.propDecorators&&typeOrFunc.propDecorators!==parentCtor.propDecorators){var propDecorators_1=typeOrFunc.propDecorators,propMetadata_1={};return Object.keys(propDecorators_1).forEach(function(prop){propMetadata_1[prop]=convertTsickleDecoratorIntoMetadata(propDecorators_1[prop])}),propMetadata_1}return this._reflect&&this._reflect.getOwnMetadata?this._reflect.getOwnMetadata("propMetadata",typeOrFunc):void 0},ReflectionCapabilities.prototype.propMetadata=function(typeOrFunc){if(!isType(typeOrFunc))return{};var parentCtor=getParentCtor(typeOrFunc),propMetadata={};if(parentCtor!==Object){var parentPropMetadata_1=this.propMetadata(parentCtor);Object.keys(parentPropMetadata_1).forEach(function(propName){propMetadata[propName]=parentPropMetadata_1[propName]})}var ownPropMetadata=this._ownPropMetadata(typeOrFunc,parentCtor);return ownPropMetadata&&Object.keys(ownPropMetadata).forEach(function(propName){var decorators=[];propMetadata.hasOwnProperty(propName)&&decorators.push.apply(decorators,propMetadata[propName]),decorators.push.apply(decorators,ownPropMetadata[propName]),propMetadata[propName]=decorators}),propMetadata},ReflectionCapabilities.prototype.hasLifecycleHook=function(type,lcProperty){return type instanceof Type&&lcProperty in type.prototype},ReflectionCapabilities.prototype.getter=function(name){return new Function("o","return o."+name+";")},ReflectionCapabilities.prototype.setter=function(name){return new Function("o","v","return o."+name+" = v;")},ReflectionCapabilities.prototype.method=function(name){var functionBody="if (!o."+name+") throw new Error('\""+name+"\" is undefined');\n        return o."+name+".apply(o, args);";return new Function("o","args",functionBody)},ReflectionCapabilities.prototype.importUri=function(type){return"object"==typeof type&&type.filePath?type.filePath:"./"+stringify(type)},ReflectionCapabilities.prototype.resourceUri=function(type){return"./"+stringify(type)},ReflectionCapabilities.prototype.resolveIdentifier=function(name,moduleUrl,members,runtime){return runtime},ReflectionCapabilities.prototype.resolveEnum=function(enumIdentifier,name){return enumIdentifier[name]},ReflectionCapabilities}(),ReflectorReader=function(){function ReflectorReader(){}return ReflectorReader.prototype.parameters=function(){},ReflectorReader.prototype.annotations=function(){},ReflectorReader.prototype.propMetadata=function(){},ReflectorReader.prototype.importUri=function(){},ReflectorReader.prototype.resourceUri=function(){},ReflectorReader.prototype.resolveIdentifier=function(){},ReflectorReader.prototype.resolveEnum=function(){},ReflectorReader}(),Reflector=function(_super){function Reflector(reflectionCapabilities){var _this=_super.call(this)||this;return _this.reflectionCapabilities=reflectionCapabilities,_this}return __extends(Reflector,_super),Reflector.prototype.updateCapabilities=function(caps){this.reflectionCapabilities=caps},Reflector.prototype.factory=function(type){return this.reflectionCapabilities.factory(type)},Reflector.prototype.parameters=function(typeOrFunc){return this.reflectionCapabilities.parameters(typeOrFunc)},Reflector.prototype.annotations=function(typeOrFunc){return this.reflectionCapabilities.annotations(typeOrFunc)},Reflector.prototype.propMetadata=function(typeOrFunc){return this.reflectionCapabilities.propMetadata(typeOrFunc)},Reflector.prototype.hasLifecycleHook=function(type,lcProperty){return this.reflectionCapabilities.hasLifecycleHook(type,lcProperty)},Reflector.prototype.getter=function(name){return this.reflectionCapabilities.getter(name)},Reflector.prototype.setter=function(name){return this.reflectionCapabilities.setter(name)},Reflector.prototype.method=function(name){return this.reflectionCapabilities.method(name)},Reflector.prototype.importUri=function(type){return this.reflectionCapabilities.importUri(type)},Reflector.prototype.resourceUri=function(type){return this.reflectionCapabilities.resourceUri(type)},Reflector.prototype.resolveIdentifier=function(name,moduleUrl,members,runtime){return this.reflectionCapabilities.resolveIdentifier(name,moduleUrl,members,runtime)},Reflector.prototype.resolveEnum=function(identifier,name){return this.reflectionCapabilities.resolveEnum(identifier,name)},Reflector}(ReflectorReader),reflector=new Reflector(new ReflectionCapabilities),Inject=makeParamDecorator("Inject",[["token",void 0]]),Optional=makeParamDecorator("Optional",[]),Injectable=makeDecorator("Injectable",[]),Self=makeParamDecorator("Self",[]),SkipSelf=makeParamDecorator("SkipSelf",[]),Host=makeParamDecorator("Host",[]),ComponentResolver=function(){function ComponentResolver(_reflector){void 0===_reflector&&(_reflector=reflector),this._reflector=_reflector,this._resolved=new Map}return ComponentResolver.prototype.resolve=function(type,throwIfNotFound){void 0===throwIfNotFound&&(throwIfNotFound=!0);var resolved=this._resolved.get(type);if(resolved)return resolved;var metadata=ListWrapper.findLast(this._reflector.annotations(type),function(obj){return obj instanceof Component});if(metadata){var propertyMetadata=this._reflector.propMetadata(type);return this._mergeWithPropertyMetadata(metadata,propertyMetadata,type)}if(throwIfNotFound)throw new Error("No Component metadata found for '"+stringify(type)+"'.");return null},ComponentResolver.prototype._mergeWithPropertyMetadata=function(meta,propertyMetadata,type){var host={},childs={};Object.keys(propertyMetadata).forEach(function(propName){var hostListeners=propertyMetadata[propName].filter(function(a){return a&&a instanceof HostListener});hostListeners.forEach(function(hostListener){var args=hostListener.args||[];host["("+hostListener.eventName+")"]=propName+"("+args.join(",")+")"});var childListeners=propertyMetadata[propName].filter(function(a){return a&&a instanceof ChildListener});childListeners.forEach(function(childListener){var args=childListener.args||[];childs[childListener.selector+";("+childListener.eventName+")"]=propName+"("+args.join(",")+")"})});var resolved=new Component({selector:meta.selector,host:meta.host?StringMapWrapper.merge(meta.host,host):host,childs:meta.childs?StringMapWrapper.merge(meta.childs,childs):childs,providers:meta.providers,components:meta.components});return this._resolved.set(type,resolved),resolved},ComponentResolver}();ComponentResolver.decorators=[{type:Injectable}],ComponentResolver.ctorParameters=function(){return[{type:ReflectorReader}]};var BaseError=function(_super){function BaseError(message){var _this=_super.call(this,message)||this,nativeError=new Error(message);return _this._nativeError=nativeError,_this}return __extends(BaseError,_super),Object.defineProperty(BaseError.prototype,"message",{get:function(){return this._nativeError.message},set:function(message){this._nativeError.message=message},enumerable:!0,configurable:!0}),Object.defineProperty(BaseError.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(BaseError.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(value){this._nativeError.stack=value},enumerable:!0,configurable:!0}),BaseError.prototype.toString=function(){return this._nativeError.toString()},BaseError}(Error),WrappedError=function(_super){function WrappedError(message,error){var _this=_super.call(this,message+" caused by: "+(error instanceof Error?error.message:error))||this;return _this.originalError=error,_this}return __extends(WrappedError,_super),Object.defineProperty(WrappedError.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),WrappedError}(BaseError),PlatformAlreadyExistsError=function(_super){function PlatformAlreadyExistsError(){return _super.call(this,"A platform already exists. Destroy it first before creating this one.")||this}return __extends(PlatformAlreadyExistsError,_super),PlatformAlreadyExistsError}(BaseError),_THROW_IF_NOT_FOUND=new Object,THROW_IF_NOT_FOUND=_THROW_IF_NOT_FOUND,_NullInjector=function(){function _NullInjector(){}return _NullInjector.prototype.get=function(token,notFoundValue){if(void 0===notFoundValue&&(notFoundValue=_THROW_IF_NOT_FOUND),notFoundValue===_THROW_IF_NOT_FOUND)throw new Error("No provider for "+stringify(token)+"!");return notFoundValue},_NullInjector}(),Injector=function(){function Injector(){}return Injector.prototype.get=function(){},Injector.prototype.get=function(){},Injector}();Injector.THROW_IF_NOT_FOUND=_THROW_IF_NOT_FOUND,Injector.NULL=new _NullInjector;var _platform,AbstractProviderError=function(_super){function AbstractProviderError(injector,key,constructResolvingMessage){var _this=_super.call(this,"DI Error")||this;return _this.keys=[key],_this.injectors=[injector],_this.constructResolvingMessage=constructResolvingMessage,_this.message=_this.constructResolvingMessage(_this.keys),_this}return __extends(AbstractProviderError,_super),AbstractProviderError.prototype.addKey=function(injector,key){this.injectors.push(injector),this.keys.push(key),this.message=this.constructResolvingMessage(this.keys)},AbstractProviderError}(BaseError),NoProviderError=function(_super){function NoProviderError(injector,key){return _super.call(this,injector,key,function(keys){var first=stringify(keys[0].token);return"No provider for "+first+"!"+constructResolvingPath(keys)})||this}return __extends(NoProviderError,_super),NoProviderError}(AbstractProviderError),CyclicDependencyError=function(_super){function CyclicDependencyError(injector,key){return _super.call(this,injector,key,function(keys){return"Cannot instantiate cyclic dependency!"+constructResolvingPath(keys)})||this}return __extends(CyclicDependencyError,_super),CyclicDependencyError}(AbstractProviderError),InstantiationError=function(_super){function InstantiationError(injector,originalException,originalStack,key){var _this=_super.call(this,"DI Error",originalException)||this;return _this.keys=[key],_this.injectors=[injector],_this}return __extends(InstantiationError,_super),InstantiationError.prototype.addKey=function(injector,key){this.injectors.push(injector),this.keys.push(key)},Object.defineProperty(InstantiationError.prototype,"message",{get:function(){var first=stringify(this.keys[0].token);return this.originalError.message+": Error during instantiation "+("of "+first+"!"+constructResolvingPath(this.keys)+".")},enumerable:!0,configurable:!0}),Object.defineProperty(InstantiationError.prototype,"causeKey",{get:function(){return this.keys[0]},enumerable:!0,configurable:!0}),InstantiationError}(WrappedError),InvalidProviderError=function(_super){function InvalidProviderError(provider){return _super.call(this,"Invalid provider - only instances of Provider and Type are allowed, got: "+provider)||this}return __extends(InvalidProviderError,_super),InvalidProviderError}(BaseError),NoAnnotationError=function(_super){function NoAnnotationError(typeOrFunc,params){return _super.call(this,NoAnnotationError._genMessage(typeOrFunc,params))||this}return __extends(NoAnnotationError,_super),NoAnnotationError._genMessage=function(typeOrFunc,params){for(var signature=[],i=0,ii=params.length;ii>i;i++){var parameter=params[i];signature.push(parameter&&0!=parameter.length?parameter.map(stringify).join(" "):"?")}return"Cannot resolve all parameters for '"+stringify(typeOrFunc)+"'("+signature.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+stringify(typeOrFunc)+"' is decorated with Injectable."},NoAnnotationError}(BaseError),OutOfBoundsError=function(_super){function OutOfBoundsError(index){return _super.call(this,"Index "+index+" is out-of-bounds.")||this}return __extends(OutOfBoundsError,_super),OutOfBoundsError}(BaseError),MixingMultiProvidersWithRegularProvidersError=function(_super){function MixingMultiProvidersWithRegularProvidersError(provider1,provider2){return _super.call(this,"Cannot mix multi providers and regular providers, got: "+provider1.toString()+" "+provider2.toString())||this}return __extends(MixingMultiProvidersWithRegularProvidersError,_super),MixingMultiProvidersWithRegularProvidersError}(BaseError),ReflectiveKey=function(){function ReflectiveKey(token,id){if(this.token=token,this.id=id,!token)throw new Error("Token must be defined!")}return Object.defineProperty(ReflectiveKey.prototype,"displayName",{get:function(){return stringify(this.token)},enumerable:!0,configurable:!0}),ReflectiveKey.get=function(token){return _globalKeyRegistry.get(resolveForwardRef(token))},Object.defineProperty(ReflectiveKey,"numberOfKeys",{get:function(){return _globalKeyRegistry.numberOfKeys},enumerable:!0,configurable:!0}),ReflectiveKey}(),KeyRegistry=function(){function KeyRegistry(){this._allKeys=new Map}return KeyRegistry.prototype.get=function(token){if(token instanceof ReflectiveKey)return token;if(this._allKeys.has(token))return this._allKeys.get(token);var newKey=new ReflectiveKey(token,ReflectiveKey.numberOfKeys);return this._allKeys.set(token,newKey),newKey},Object.defineProperty(KeyRegistry.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),KeyRegistry}(),_globalKeyRegistry=new KeyRegistry,ReflectiveDependency=function(){function ReflectiveDependency(key,optional,visibility){this.key=key,this.optional=optional,this.visibility=visibility}return ReflectiveDependency.fromKey=function(key){return new ReflectiveDependency(key,!1,null)},ReflectiveDependency}(),_EMPTY_LIST=[],ResolvedReflectiveProvider_=function(){function ResolvedReflectiveProvider_(key,resolvedFactories,multiProvider){this.key=key,this.resolvedFactories=resolvedFactories,this.multiProvider=multiProvider}return Object.defineProperty(ResolvedReflectiveProvider_.prototype,"resolvedFactory",{get:function(){return this.resolvedFactories[0]},enumerable:!0,configurable:!0}),ResolvedReflectiveProvider_}(),ResolvedReflectiveFactory=function(){function ResolvedReflectiveFactory(factory,dependencies){this.factory=factory,this.dependencies=dependencies}return ResolvedReflectiveFactory}(),UNDEFINED=new Object,ReflectiveInjector=function(){function ReflectiveInjector(){}return ReflectiveInjector.resolve=function(providers){return resolveReflectiveProviders(providers)},ReflectiveInjector.resolveAndCreate=function(providers,parent){void 0===parent&&(parent=null);var ResolvedReflectiveProviders=ReflectiveInjector.resolve(providers);return ReflectiveInjector.fromResolvedProviders(ResolvedReflectiveProviders,parent)},ReflectiveInjector.fromResolvedProviders=function(providers,parent){return void 0===parent&&(parent=null),new ReflectiveInjector_(providers,parent)},ReflectiveInjector.prototype.parent=function(){},ReflectiveInjector.prototype.resolveAndCreateChild=function(){},ReflectiveInjector.prototype.createChildFromResolved=function(){},ReflectiveInjector.prototype.resolveAndInstantiate=function(){},ReflectiveInjector.prototype.instantiateResolved=function(){},ReflectiveInjector.prototype.get=function(){},ReflectiveInjector}(),ReflectiveInjector_=function(){function ReflectiveInjector_(_providers,_parent){void 0===_parent&&(_parent=null),this._constructionCounter=0,this._providers=_providers,this._parent=_parent;var len=_providers.length;this.keyIds=new Array(len),this.objs=new Array(len);for(var i=0;len>i;i++)this.keyIds[i]=_providers[i].key.id,this.objs[i]=UNDEFINED}return ReflectiveInjector_.prototype.get=function(token,notFoundValue){return void 0===notFoundValue&&(notFoundValue=THROW_IF_NOT_FOUND),this._getByKey(ReflectiveKey.get(token),null,notFoundValue)},Object.defineProperty(ReflectiveInjector_.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),ReflectiveInjector_.prototype.resolveAndCreateChild=function(providers){var ResolvedReflectiveProviders=ReflectiveInjector.resolve(providers);return this.createChildFromResolved(ResolvedReflectiveProviders)},ReflectiveInjector_.prototype.createChildFromResolved=function(providers){var inj=new ReflectiveInjector_(providers);return inj._parent=this,inj},ReflectiveInjector_.prototype.resolveAndInstantiate=function(provider){return this.instantiateResolved(ReflectiveInjector.resolve([provider])[0])},ReflectiveInjector_.prototype.instantiateResolved=function(provider){return this._instantiateProvider(provider)},ReflectiveInjector_.prototype.getProviderAtIndex=function(index){if(0>index||index>=this._providers.length)throw new OutOfBoundsError(index);return this._providers[index]},ReflectiveInjector_.prototype._new=function(provider){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw new CyclicDependencyError(this,provider.key);return this._instantiateProvider(provider)},ReflectiveInjector_.prototype._getMaxNumberOfObjects=function(){return this.objs.length},ReflectiveInjector_.prototype._instantiateProvider=function(provider){if(provider.multiProvider){for(var res=new Array(provider.resolvedFactories.length),i=0;i<provider.resolvedFactories.length;++i)res[i]=this._instantiate(provider,provider.resolvedFactories[i]);return res}return this._instantiate(provider,provider.resolvedFactories[0])},ReflectiveInjector_.prototype._instantiate=function(provider,ResolvedReflectiveFactory$$1){var deps,_this=this,factory=ResolvedReflectiveFactory$$1.factory;try{deps=ResolvedReflectiveFactory$$1.dependencies.map(function(dep){return _this._getByReflectiveDependency(dep)})}catch(e){throw(e instanceof AbstractProviderError||e instanceof InstantiationError)&&e.addKey(this,provider.key),e}var obj;try{obj=factory.apply(void 0,deps)}catch(e){throw new InstantiationError(this,e,e.stack,provider.key)}return obj},ReflectiveInjector_.prototype._getByReflectiveDependency=function(dep){return this._getByKey(dep.key,dep.visibility,dep.optional?null:THROW_IF_NOT_FOUND)},ReflectiveInjector_.prototype._getByKey=function(key,visibility,notFoundValue){return key===INJECTOR_KEY?this:visibility instanceof Self?this._getByKeySelf(key,notFoundValue):this._getByKeyDefault(key,notFoundValue,visibility)},ReflectiveInjector_.prototype._getObjByKeyId=function(keyId){for(var i=0;i<this.keyIds.length;i++)if(this.keyIds[i]===keyId)return this.objs[i]===UNDEFINED&&(this.objs[i]=this._new(this._providers[i])),this.objs[i];return UNDEFINED},ReflectiveInjector_.prototype._throwOrNull=function(key,notFoundValue){if(notFoundValue!==THROW_IF_NOT_FOUND)return notFoundValue;throw new NoProviderError(this,key)},ReflectiveInjector_.prototype._getByKeySelf=function(key,notFoundValue){var obj=this._getObjByKeyId(key.id);return obj!==UNDEFINED?obj:this._throwOrNull(key,notFoundValue)},ReflectiveInjector_.prototype._getByKeyDefault=function(key,notFoundValue,visibility){var inj;for(inj=visibility instanceof SkipSelf?this._parent:this;inj instanceof ReflectiveInjector_;){var inj_=inj,obj=inj_._getObjByKeyId(key.id);if(obj!==UNDEFINED)return obj;inj=inj_._parent}return null!==inj?inj.get(key.token,notFoundValue):this._throwOrNull(key,notFoundValue)},Object.defineProperty(ReflectiveInjector_.prototype,"displayName",{get:function(){var providers=_mapProviders(this,function(b){return' "'+b.key.displayName+'" '}).join(", ");return"ReflectiveInjector(providers: ["+providers+"])"},enumerable:!0,configurable:!0}),ReflectiveInjector_.prototype.toString=function(){return this.displayName},ReflectiveInjector_}(),INJECTOR_KEY=ReflectiveKey.get(Injector),PlatformRef=function(){function PlatformRef(){}return PlatformRef.prototype.bootstrapComponent=function(){},PlatformRef.prototype.injector=function(){},PlatformRef.prototype.onDestroy=function(){},PlatformRef.prototype.destroy=function(){},PlatformRef.prototype.destroyed=function(){},PlatformRef}(),ComponentFactoryResolver=function(){function ComponentFactoryResolver(factories,_parent){this._parent=_parent,this._factories=new Map;for(var i=0;i<factories.length;i++){var factory=factories[i];this._factories.set(factory.componentType,factory)}}return ComponentFactoryResolver.prototype.resolveComponentFactory=function(componentType){var result=this._factories.get(componentType);if(!result){if(!this._parent)throw new CouldNotResolveFactoryError(componentType);result=this._parent.resolveComponentFactory(componentType)}return result},ComponentFactoryResolver}(),CouldNotResolveFactoryError=function(_super){function CouldNotResolveFactoryError(type){return _super.call(this,'Could not resolve factory for "'+stringify(type)+"! Did you provide the component to the bootstrap function?")||this}return __extends(CouldNotResolveFactoryError,_super),CouldNotResolveFactoryError}(BaseError),ComponentFactory=function(){function ComponentFactory(){}return ComponentFactory.prototype.selector=function(){},ComponentFactory.prototype.componentType=function(){},ComponentFactory.prototype.create=function(){},ComponentFactory}(),ApplicationRef=function(){function ApplicationRef(injector,_componentFactoryResolver){this.injector=injector,this._componentFactoryResolver=_componentFactoryResolver,this._rootComponents=[],this._rootComponentTypes=[],this._views=[]}return ApplicationRef.prototype.bootstrap=function(componentOrFactory){var componentFactory,_this=this;componentFactory=componentOrFactory instanceof ComponentFactory?componentOrFactory:this._componentFactoryResolver.resolveComponentFactory(componentOrFactory),this._rootComponentTypes.push(componentFactory.componentType);var compRef=componentFactory.create(this.injector,componentFactory.selector);return compRef.onDestroy(function(){_this._unloadComponent(compRef)}),this._loadComponent(compRef),compRef},ApplicationRef.prototype.attachView=function(viewRef){var view=viewRef;this._views.push(view),view.attachToAppRef(this)},ApplicationRef.prototype.detachView=function(viewRef){var view=viewRef;ListWrapper.remove(this._views,view),view.detachFromAppRef()},ApplicationRef.prototype._loadComponent=function(componentRef){this.attachView(componentRef.hostView),this._rootComponents.push(componentRef)},ApplicationRef.prototype._unloadComponent=function(componentRef){this.detachView(componentRef.hostView),ListWrapper.remove(this._rootComponents,componentRef)},ApplicationRef.prototype.onDestroy=function(){this._views.slice().forEach(function(view){return view.destroy()})},ApplicationRef}();ApplicationRef.decorators=[{type:Injectable}],ApplicationRef.ctorParameters=function(){return[{type:Injector},{type:ComponentFactoryResolver}]};var ComponentRef=function(){function ComponentRef(){}return ComponentRef.prototype.location=function(){},ComponentRef.prototype.injector=function(){},ComponentRef.prototype.instance=function(){},ComponentRef.prototype.hostView=function(){},ComponentRef.prototype.componentType=function(){},ComponentRef.prototype.destroy=function(){},ComponentRef.prototype.onDestroy=function(){},ComponentRef}(),RendererFactory=function(){function RendererFactory(){}return RendererFactory.prototype.createRenderer=function(){},RendererFactory}(),Renderer=function(){function Renderer(){}return Renderer.prototype.parse=function(){},Renderer.prototype.destroy=function(){},Renderer.prototype.createElement=function(){},Renderer.prototype.createComment=function(){},Renderer.prototype.createText=function(){},Renderer.prototype.destroyNode=function(){},Renderer.prototype.appendChild=function(){},Renderer.prototype.insertBefore=function(){},Renderer.prototype.removeChild=function(){},Renderer.prototype.selectRootElement=function(){},Renderer.prototype.parentNode=function(){},Renderer.prototype.nextSibling=function(){},Renderer.prototype.setAttribute=function(){},Renderer.prototype.removeAttribute=function(){},Renderer.prototype.addClass=function(){},Renderer.prototype.removeClass=function(){},Renderer.prototype.setStyle=function(){},Renderer.prototype.removeStyle=function(){},Renderer.prototype.setProperty=function(){},Renderer.prototype.setValue=function(){},Renderer.prototype.listen=function(){},Renderer}(),ElementRef=function(){function ElementRef(nativeElement){this.nativeElement=nativeElement}return ElementRef}(),ViewContainerRef=function(){function ViewContainerRef(){}return ViewContainerRef.prototype.anchorElement=function(){},ViewContainerRef.prototype.injector=function(){},ViewContainerRef.prototype.parentInjector=function(){},ViewContainerRef.prototype.clear=function(){},ViewContainerRef.prototype.get=function(){},ViewContainerRef.prototype.length=function(){},ViewContainerRef.prototype.createEmbeddedView=function(){},ViewContainerRef.prototype.createComponent=function(){},ViewContainerRef.prototype.indexOf=function(){},ViewContainerRef.prototype.remove=function(){},ViewContainerRef.prototype.detach=function(){},ViewContainerRef}(),NodeData=function(){function NodeData(){}return NodeData}(),NOT_CREATED=new Object,_tokenKeyCache=new Map,RendererTokenKey=tokenKey(Renderer),ElementRefTokenKey=tokenKey(ElementRef),ViewContainerRefTokenKey=tokenKey(ViewContainerRef),InjectorRefTokenKey=tokenKey(Injector),VIEW_DEFINITION_CACHE=new WeakMap,EMPTY_CONTEXT=new Object,ComponentFactory_=function(_super){function ComponentFactory_(selector,componentType,_viewDefFactory){var _this=_super.call(this)||this;return _this.selector=selector,_this.componentType=componentType,_this._viewDefFactory=_viewDefFactory,_this}return __extends(ComponentFactory_,_super),ComponentFactory_.prototype.create=function(injector,rootSelectorOrNode){var viewDef=resolveViewDefinition(this._viewDefFactory),componentNodeIndex=viewDef.componentProvider.index,view=createRootView(viewDef,injector,rootSelectorOrNode,EMPTY_CONTEXT),component=asProviderData(view,componentNodeIndex).instance;return new ComponentRef_(view,new ViewRef_(view),component)},ComponentFactory_}(ComponentFactory),ComponentRef_=function(_super){function ComponentRef_(_view,_viewRef,_component){var _this=_super.call(this)||this;return _this._view=_view,_this._viewRef=_viewRef,_this._component=_component,_this}return __extends(ComponentRef_,_super),Object.defineProperty(ComponentRef_.prototype,"location",{get:function(){return new ElementRef(null)},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"injector",{get:function(){return new Injector_(this._view)},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"instance",{get:function(){return this._component},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"hostView",{get:function(){return this._viewRef},enumerable:!0,configurable:!0}),Object.defineProperty(ComponentRef_.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),ComponentRef_.prototype.destroy=function(){this._viewRef.destroy()},ComponentRef_.prototype.onDestroy=function(callback){this._viewRef.onDestroy(callback)},ComponentRef_}(ComponentRef),ViewContainerRef_=function(){function ViewContainerRef_(_view){this._view=_view,this._embeddedViews=[]}return Object.defineProperty(ViewContainerRef_.prototype,"anchorElement",{get:function(){return new ElementRef(this._view.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"injector",{get:function(){return new Injector_(this._view)},enumerable:!0,configurable:!0}),Object.defineProperty(ViewContainerRef_.prototype,"parentInjector",{get:function(){for(var view=this._view,def=view.def;!def&&view;)view=view.parent,def=view.def;return view?new Injector_(view):this._view.root.injector},enumerable:!0,configurable:!0}),ViewContainerRef_.prototype.clear=function(){},ViewContainerRef_.prototype.get=function(index){var view=this._embeddedViews[index];if(view){var ref=new ViewRef_(view);return ref.attachToViewContainerRef(this),ref}return null},Object.defineProperty(ViewContainerRef_.prototype,"length",{get:function(){return 0},enumerable:!0,configurable:!0}),ViewContainerRef_.prototype.createEmbeddedView=function(){},ViewContainerRef_.prototype.createComponent=function(componentFactory,index,injector,rootSelectorOrNode){var contextInjector=injector||this.parentInjector,componentRef=componentFactory.create(contextInjector,rootSelectorOrNode);return this.insert(componentRef.hostView,index),componentRef},ViewContainerRef_.prototype.insert=function(viewRef,index){var viewRef_=viewRef,viewData=viewRef_._view;

return attachEmbeddedView(this._view,index,viewData),viewRef_.attachToViewContainerRef(this),viewRef},ViewContainerRef_.prototype.indexOf=function(viewRef){return this._embeddedViews.indexOf(viewRef._view)},ViewContainerRef_.prototype.remove=function(index){var view=detachEmbeddedView(this._view,index);view&&destroyView(view)},ViewContainerRef_.prototype.detach=function(index){var view=detachEmbeddedView(this._view,index);return view?new ViewRef_(view):null},ViewContainerRef_}(),ViewRef_=function(){function ViewRef_(_view){this._view=_view,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(ViewRef_.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(ViewRef_.prototype,"destroyed",{get:function(){return 0!==(8&this._view.state)},enumerable:!0,configurable:!0}),ViewRef_.prototype.detach=function(){this._view.state&=-3},ViewRef_.prototype.reattach=function(){this._view.state|=2},ViewRef_.prototype.onDestroy=function(callback){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(callback)},ViewRef_.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),destroyView(this._view)},ViewRef_.prototype.detachFromAppRef=function(){this._appRef=null},ViewRef_.prototype.attachToAppRef=function(appRef){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=appRef},ViewRef_.prototype.attachToViewContainerRef=function(vcRef){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=vcRef},ViewRef_}(),Injector_=function(){function Injector_(_view){this._view=_view}return Injector_.prototype.get=function(token,notFoundValue){return void 0===notFoundValue&&(notFoundValue=Injector.THROW_IF_NOT_FOUND),resolveDep(this._view,{flags:0,token:token,tokenKey:tokenKey(token)},notFoundValue)},Injector_}(),ViewRef=function(){function ViewRef(){}return ViewRef.prototype.destroy=function(){},ViewRef.prototype.destroyed=function(){},ViewRef.prototype.onDestroy=function(){},ViewRef}(),InjectionToken=function(){function InjectionToken(_desc){this._desc=_desc}return InjectionToken.prototype.toString=function(){return"InjectionToken "+this._desc},InjectionToken}(),CORE_PROVIDERS=[{provide:ReflectorReader,useValue:reflector},ComponentResolver];exports.createPlatformFactory=createPlatformFactory,exports.getPlatform=getPlatform,exports.PlatformRef=PlatformRef,exports.ApplicationRef=ApplicationRef,exports.Component=Component,exports.HostListener=HostListener,exports.ChildListener=ChildListener,exports.ComponentResolver=ComponentResolver,exports.ComponentFactory=ComponentFactory,exports.ComponentFactoryResolver=ComponentFactoryResolver,exports.ComponentRef=ComponentRef,exports.createComponentFactory=createComponentFactory,exports.ViewRef=ViewRef,exports.ViewContainerRef=ViewContainerRef,exports.ElementRef=ElementRef,exports.createViewDefinitionFactory=createViewDefinitionFactory,exports.createView=createView,exports.forwardRef=forwardRef,exports.InjectionToken=InjectionToken,exports.Injector=Injector,exports.Host=Host,exports.Inject=Inject,exports.Injectable=Injectable,exports.Optional=Optional,exports.Self=Self,exports.SkipSelf=SkipSelf,exports.ReflectiveInjector=ReflectiveInjector,exports.ReflectiveInjector_=ReflectiveInjector_,exports.ReflectiveKey=ReflectiveKey,exports.ReflectiveDependency=ReflectiveDependency,exports.ResolvedReflectiveFactory=ResolvedReflectiveFactory,exports.ResolvedReflectiveProvider_=ResolvedReflectiveProvider_,exports.resolveReflectiveProviders=resolveReflectiveProviders,exports.mergeResolvedReflectiveProviders=mergeResolvedReflectiveProviders,exports.constructDependencies=constructDependencies,exports.reflector=reflector,exports.ReflectorReader=ReflectorReader,exports.Reflector=Reflector,exports.Type=Type,exports.Renderer=Renderer,exports.RendererFactory=RendererFactory,exports.CORE_PROVIDERS=CORE_PROVIDERS,exports.asProviderData=asProviderData,exports.NodeData=NodeData,exports.b=resolveForwardRef,exports.f=ReflectionCapabilities,exports.c=makeDecorator,exports.d=makeParamDecorator,exports.e=makePropDecorator,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=core.umd.min.js.map
